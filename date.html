<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Our Dates ğŸ’•</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="container">
  <header>
    <h1>Our Dates ğŸ’•</h1>
    <div class="header-buttons">
      <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">ğŸŒ™</button>
      <button class="btn" onclick="openAddModal()">â• Add Date</button>
    </div>
  </header>

  <div class="counter">
    <div class="counter-days" id="daysCounter">0</div>
    <div class="counter-label">Days Together ğŸ’‘</div>
  </div>

  <div class="stats">
    <div class="stat-card" onclick="filterByAll()" aria-label="View all dates">
      <div class="stat-number" id="totalDates">0</div>
      <div class="stat-label">Total Dates ğŸ“…</div>
    </div>
    <div class="stat-card" onclick="filterByYear()" aria-label="View this year's dates">
      <div class="stat-number" id="yearDates">0</div>
      <div class="stat-label">This Year ğŸ‰</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="totalPhotos">0</div>
      <div class="stat-label">Total Photos ğŸ“¸</div>
    </div>
  </div>

  <div class="action-buttons">
    <button class="btn" onclick="randomMemory()">ğŸ² Random Memory</button>
    <button class="btn" onclick="exportBackup()">ğŸ’¾ Export Backup</button>
    <button class="btn" onclick="importBackup()">ğŸ“¥ Import Data</button>
  </div>

  <div class="search-filter-bar">
    <input type="text" class="search-box" id="searchBox" placeholder="ğŸ” Search dates by title or notes..." oninput="applyFilters()">
    <div class="filter-buttons">
      <button class="filter-btn active" data-filter="all" onclick="setFilter('all')">All</button>
      <button class="filter-btn" data-filter="favorite" onclick="setFilter('favorite')">â­ Favorites</button>
      <button class="filter-btn" data-filter="romance" onclick="setFilter('romance')">ğŸ’• Romance</button>
      <button class="filter-btn" data-filter="adventure" onclick="setFilter('adventure')">ğŸ’ Adventure</button>
      <button class="filter-btn" data-filter="fun" onclick="setFilter('fun')">ğŸ‰ Fun</button>
      <button class="filter-btn" data-filter="cozy" onclick="setFilter('cozy')">ğŸ¡ Cozy</button>
    </div>
  </div>

  <div class="timeline" id="timeline"></div>
</div>

<div class="modal" id="addModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">Add New Date ğŸ’•</h2>
      <button class="close-btn" onclick="closeAddModal()">&times;</button>
    </div>
    <form onsubmit="addDate(event)">
      <div class="form-group">
        <label for="dateInput">Date</label>
        <input type="date" id="dateInput" required>
      </div>
      <div class="form-group">
        <label for="titleInput">Title</label>
        <input type="text" id="titleInput" placeholder="Our amazing date..." required>
      </div>
      <div class="form-group">
        <label for="tagInput">Category</label>
        <select id="tagInput">
          <option value="">No Category</option>
          <option value="romance">ğŸ’• Romance</option>
          <option value="adventure">ğŸ’ Adventure</option>
          <option value="fun">ğŸ‰ Fun</option>
          <option value="cozy">ğŸ¡ Cozy</option>
        </select>
      </div>
      <div class="form-group">
        <label for="notesInput">Notes</label>
        <textarea id="notesInput" placeholder="What made this date special..."></textarea>
      </div>
      <div class="form-group">
        <label>Photos (optional)</label>
        <input type="file" id="photoInput" accept="image/*" multiple style="display:none;" onchange="previewPhotos(event)">
        <button type="button" class="btn" onclick="document.getElementById('photoInput').click()">ğŸ“¸ Choose Photos</button>
        <div class="photo-preview" id="photoPreview"></div>
      </div>
      <button type="submit" class="btn" style="width: 100%;">ğŸ’• Save Date</button>
    </form>
  </div>
</div>

<div class="modal" id="viewModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title" id="viewTitle"></h2>
      <button class="close-btn" onclick="closeViewModal()">&times;</button>
    </div>
    <div id="viewContent">
      <p><strong>Date:</strong> <span id="viewDate"></span></p>
      <p id="viewTagContainer"></p>
      <p><strong>Notes:</strong></p>
      <p id="viewNotes"></p>
      <div class="view-photos" id="viewPhotosContainer"></div>
    </div>
    <div class="modal-buttons">
      <button class="btn" onclick="toggleFavorite()">
        <span id="favoriteButtonText">â˜† Star</span>
      </button>
      <button class="btn" onclick="startSlideshow()">â–¶ï¸ Slideshow</button>
      <button class="btn" onclick="openEditModal()">âœï¸ Edit</button>
      <button class="btn" onclick="addMorePhotos()">ğŸ“¸ Add Photos</button>
      <button class="btn" onclick="confirmDelete()" style="background: #ff4444;">ğŸ—‘ï¸ Delete</button>
    </div>
  </div>
</div>

<div class="modal" id="editModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">Edit Date ğŸ’•</h2>
      <button class="close-btn" onclick="closeEditModal()">&times;</button>
    </div>
    <form onsubmit="saveEdit(event)">
      <div class="form-group">
        <label for="editDateInput">Date</label>
        <input type="date" id="editDateInput" required>
      </div>
      <div class="form-group">
        <label for="editTitleInput">Title</label>
        <input type="text" id="editTitleInput" required>
      </div>
      <div class="form-group">
        <label for="editTagInput">Category</label>
        <select id="editTagInput">
          <option value="">No Category</option>
          <option value="romance">ğŸ’• Romance</option>
          <option value="adventure">ğŸ’ Adventure</option>
          <option value="fun">ğŸ‰ Fun</option>
          <option value="cozy">ğŸ¡ Cozy</option>
        </select>
      </div>
      <div class="form-group">
        <label for="editNotesInput">Notes</label>
        <textarea id="editNotesInput"></textarea>
      </div>
      <div class="form-group">
        <label>Current Photos</label>
        <div class="photo-preview" id="editPhotoPreview"></div>
      </div>
      <button type="submit" class="btn" style="width: 100%;">ğŸ’• Save Changes</button>
    </form>
  </div>
</div>

<div class="lightbox" id="lightbox">
  <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
  <button class="lightbox-nav lightbox-prev" onclick="prevPhoto()">â€¹</button>
  <div class="lightbox-content">
    <img class="lightbox-img" id="lightboxImg" src="" alt="Full size photo">
  </div>
  <button class="lightbox-nav lightbox-next" onclick="nextPhoto()">â€º</button>
</div>

<div class="loading" id="loading">
  <div class="loading-content">
    <div class="spinner"></div>
    <p id="loadingText">Uploading photos... ğŸ’•</p>
  </div>
</div>

<script src="https://upload-widget.cloudinary.com/global/all.js"></script>
<script src="script.js"></script>

</body>
</html>